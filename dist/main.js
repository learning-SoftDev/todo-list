(()=>{"use strict";const e=()=>{},t=document.querySelector("#addProject"),a=document.querySelector("#projectForm"),d=document.querySelector("#projectInput");t.addEventListener("click",(()=>{a.classList.remove("hidden"),d.focus()}));const l=document.querySelector("#addList"),s=document.querySelector("#taskForm"),i=document.querySelector(".listSubmitBtn"),c=document.querySelector("#editConfirm");l.addEventListener("click",(()=>{s.classList.remove("hidden"),i.classList.remove("hidden"),c.classList.add("hidden")})),document.querySelector("#checkbox").addEventListener("change",(()=>document.body.classList.toggle("light"))),document.querySelector(".hiddenMenu").addEventListener("click",(()=>{document.querySelector(".leftPanel").classList.toggle("hidden")}));let r="",o="";const n=()=>{const e=document.querySelector("#taskForm"),t=document.querySelector("#listInput"),a=document.querySelector("#listInputDetail"),d=document.querySelector("#listInputDate"),l=document.querySelector(".taskValidation");t.value="",a.value="",d.value="",e.classList.add("hidden"),l.classList.add("hidden"),document.querySelector(".list-todo").appendChild(e),q()};document.querySelector(".projectCancelBtn").addEventListener("click",e.hideProjectForm),document.querySelector(".listCancelBtn").addEventListener("click",n);let u="";function m(e){this.projectName=e,this.lastSelected=!0}window.addEventListener("load",(()=>{u=JSON.parse(localStorage.getItem("projectList"))||[],document.querySelector("#projectForm").addEventListener("submit",(t=>{t.preventDefault();const a=document.getElementById("projectInput").value,d=document.querySelector(".projectValidation");if(u.filter((e=>e.projectName===a)).length>0)return void d.classList.remove("hidden");const l=new m(a);u.push(l),p(),t.target.reset(),e.hideProjectForm(),h(),document.querySelector("#projectCompleteList").lastChild.querySelector(".tile").click()})),r=!0,h()}));const p=()=>{localStorage.setItem("projectList",JSON.stringify(u)),localStorage.setItem("taskList",JSON.stringify(v))},L=e=>{const t=document.createElement("span");return t.classList.add("material-icons-round"),t.textContent=e,t},h=()=>{document.querySelector("#projectCompleteList").innerHTML="",u.forEach((e=>{const t=document.querySelector("#projectCompleteList"),a=document.createElement("div"),d=document.createElement("div"),l=L("menu"),s=document.createElement("input");s.setAttribute("readonly",""),s.setAttribute("spellcheck",!1),s.setAttribute("maxlength",12);const i=L("edit"),c=L("delete");d.classList.add("tile"),e.lastSelected&&d.classList.add("lastSelected"),s.classList.add("projectName"),c.classList.add("projDelIcon"),s.value=e.projectName,i.setAttribute("title","Edit"),c.setAttribute("title","Delete"),d.appendChild(l),d.appendChild(s),d.appendChild(i),d.appendChild(c),a.appendChild(d),t.appendChild(a),c.addEventListener("click",(()=>{u=u.filter((t=>t.projectName!==e.projectName)),v=v.filter((t=>t.projectName!==e.projectName)),p(),h(),document.getElementById("allTasks").click()})),i.addEventListener("click",(()=>{projectNameEdit=d.querySelector(".projectName"),projectNameEdit.classList.toggle("projectNameEdit"),originalProjName=projectNameEdit.value,projectNameEdit.removeAttribute("readonly"),projectNameEdit.focus(),projectNameEdit.addEventListener("keypress",r,!1),projectNameEdit.addEventListener("blur",r,!1)}));const r=t=>{if("blur"===t.type||"Enter"===t.key){if(originalProjName===t.target.value)projectNameEdit.classList.toggle("projectNameEdit");else if(JSON.parse(localStorage.getItem("projectList")).filter((e=>e.projectName===t.target.value)).length>0){const e=document.createElement("div");return e.classList.add("editProjectValidation"),e.classList.add("validation"),e.textContent="Duplicate project name not allowed. Reverting back.",a.appendChild(e),projectNameEdit.setAttribute("readonly",!0),projectNameEdit.classList.toggle("projectNameEdit"),void(projectNameEdit.value=originalProjName)}projectNameEdit.setAttribute("readonly",!0),document.activeElement.blur(),taskListEdit=v,taskListEdit.forEach((e=>{e.projectName===originalProjName&&(e.projectName=t.target.value)})),u.forEach((e=>{e.lastSelected=!1})),e.projectName=t.target.value,e.lastSelected=!0,p(),h(),document.querySelector(".lastSelected").click()}}})),(()=>{const e=document.querySelectorAll(".tile"),t=document.querySelector("#addList"),a=document.querySelector(".title");e.forEach((d=>d.addEventListener("click",(d=>{JSON.stringify(d.target.classList).includes("projDelIcon")||(e.forEach((e=>{e.classList.remove("selected")})),d.target.closest(".tile").classList.add("selected"),r=JSON.stringify(d.target.closest(".tile").classList).includes("homeTiles"),r?(t.classList.add("hidden"),o=d.target.closest(".tile").querySelector("div").textContent,a.innerHTML=o):(t.classList.remove("hidden"),o=d.target.closest(".tile").querySelector("input").value,a.innerHTML=o),null!==document.querySelector(".editProjectValidation")&&document.querySelector(".editProjectValidation").remove(),n(),q())}))))})()};let v="",S=!1,y="";var g,E;function N(e,t,a,d="No Due Date"){this.taskName=e,this.projectName=t,this.details=a,this.dueDate=d,this.completed=!1,this.important=!1}function j(e,t){let a=new Date(e);return a.setDate(e.getDate()+t),a}function k(e){let t=e.getDate();t<10&&(t="0"+t);let a=e.getMonth()+1;return a<10&&(a="0"+a),`${e.getFullYear()}-${a}-${t}`}window.addEventListener("load",(()=>{v=JSON.parse(localStorage.getItem("taskList"))||[],document.querySelector("#taskForm").addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("listInput").value;let a=document.querySelector(".selected input");a=null===a?editProjNameCurrrent:a.value;const d=document.querySelector(".taskValidation");if(t===y);else if(JSON.parse(localStorage.getItem("taskList")).filter((e=>e.taskName+e.projectName===t+a)).length>0)return void d.classList.remove("hidden");if(!S){let e=document.getElementById("listInputDetail").value;""===e&&(e="No details");let d=document.getElementById("listInputDate").value;""===d&&(d="No Due Date");const l=new N(t,a,e,d);v.push(l)}p(),e.target.reset(),n(),q()})),o="All Tasks",q()})),g=document.getElementById("listInput"),E=document.querySelector(".listSubmitBtn"),g.addEventListener("input",(e=>{""!==e.target.value?(E.disabled=!1,E.classList.remove("disabled")):(E.classList.add("disabled"),E.disabled=!0)}));const q=()=>{v=JSON.parse(localStorage.getItem("taskList"))||[];let e="";e=v,0===v.length&&r?document.querySelector(".noTask").classList.remove("hidden"):document.querySelector(".noTask").classList.add("hidden"),document.querySelector(".list-todo").insertBefore(document.querySelector("#taskForm"),document.querySelector("#addList"));let t=new Date;if("Important"===o)e=v.filter((e=>e.important));else if("All Tasks"===o);else if("Today"===o)e=v.filter((e=>k(t)===e.dueDate));else if("Next 7 Days"===o){const a=k(j(t,1)),d=k(j(t,7)),l=Date.parse(a),s=Date.parse(d);e=v.filter((e=>Date.parse(e.dueDate)<=s&&Date.parse(e.dueDate)>=l))}else e=v.filter((e=>e.projectName===o));document.querySelector("#taskCompleteList > ul").innerHTML="",e.forEach((e=>{const t=document.createElement("li"),a=document.createElement("div"),d=document.createElement("div"),l=document.createElement("div"),s=document.createElement("div"),i=document.createElement("div"),c=document.createElement("div"),o=document.createElement("div"),n=document.createElement("div"),u=L("star_outline"),m=L("star"),h=L("edit"),g=L("delete");a.classList.add("unchecked"),d.classList.add("list-details"),l.classList.add("taskTitle"),s.classList.add("taskDetails"),i.classList.add("date"),c.classList.add("list-right"),o.classList.add("list-right-icons"),n.classList.add("starContainer"),u.classList.add("star-outline"),m.classList.add("important"),u.setAttribute("title","Mark as Important"),e.important?u.classList.add("listHidden"):m.classList.add("listHidden"),e.completed&&(a.classList.toggle("checked"),d.classList.toggle("lineThrough"),d.classList.toggle("fade")),g.classList.add("delIcon"),l.textContent=r?e.projectName+" > "+e.taskName:e.taskName,s.textContent=e.details,i.textContent=e.dueDate,h.setAttribute("title","Edit"),g.setAttribute("title","Delete"),document.querySelector("ul").appendChild(t),t.appendChild(a),t.appendChild(d),d.appendChild(l),d.appendChild(s),t.appendChild(c),c.appendChild(i),c.appendChild(o),o.appendChild(n),n.appendChild(u),n.appendChild(m),o.appendChild(h),o.appendChild(g),g.addEventListener("click",(()=>{v=v.filter((t=>t.taskName+t.projectName!==e.taskName+e.projectName)),p(),q()})),a.addEventListener("click",(()=>{!0===e.completed?e.completed=!1:e.completed=!0,p(),q()})),n.addEventListener("click",(()=>{!0===e.important?e.important=!1:e.important=!0,p(),q()})),h.addEventListener("click",(()=>{S=!0;const a=document.createElement("div");a.classList.add("containerEdit"),t.querySelector(".unchecked").classList.add("hidden"),t.querySelector(".list-details").classList.add("hidden"),t.querySelector(".list-right").classList.add("hidden"),t.insertBefore(a,t.querySelector(".unchecked")),a.appendChild(document.getElementById("taskForm")),document.getElementById("taskForm").classList.remove("hidden");let d=document.querySelector("#listInput"),l=document.querySelector("#listInputDetail"),s=document.querySelector("#listInputDate");d.value=e.taskName,l.value=e.details,s.value=e.dueDate,document.querySelector("#editConfirm").classList.remove("hidden"),document.querySelector(".listSubmitBtn").classList.add("hidden");const i=document.querySelector("#taskForm > .inputField");for(const t of i.children)t.addEventListener("change",(()=>{e.taskName=d.value,e.details=l.value,e.dueDate=s.value||"No Due Date"}));y=e.taskName,editProjNameCurrrent=e.projectName}))})),S=!1,y=""}})();